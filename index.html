<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>To Do List</title>
        <link href="style.css" rel="stylesheet">
    </head>
    <body>
    <div class="task">
        <div id="myDIV" class="header">
            <h2>Work Hard, Play Hard</h2>            
            <input type="text" id="myInput" placeholder="">
            <span onclick="newElement()" class="addBtn">Add</span>
        </div>
        
        <ul id="myUL">
            <li>Go to the gym</li>
            <li class="checked">Create to-do list</li>
            <li>Pass the first lesson in English</li>
            <li>Have lunch</li>
        </ul>
    </div>
     
  <button onclick="speech ()">Слушать</button>
  <button onclick="talk ()">Проговорить</button>
  <button onclick="stop ()">Остановить</button>

  <script>
  // Создаем распознаватель
  var recognizer = new webkitSpeechRecognition();

  // Ставим опцию, чтобы распознавание началось ещё до того, как пользователь закончит говорить
  recognizer.interimResults = true;

  // Какой язык будем распознавать?
  recognizer.lang = 'ru-Ru';

  // Используем колбек для обработки результатов
  recognizer.onresult = function (event) {
    var result = event.results[event.resultIndex];
    if (result.isFinal) {
      alert('Вы сказали: ' + result[0].transcript);
    } else {
      console.log('Промежуточный результат: ', result[0].transcript);
    }
  };

  function speech () {
    // Начинаем слушать микрофон и распознавать голос
    recognizer.start();
  }

  var synth = window.speechSynthesis;
  
  var utterance = new SpeechSynthesisUtterance('Ты — один из выживших счастливчиков, живущий в городе-крепости, названной Новой Надеждой. Ты работал над системой раннего оповещения для городской защиты, когда в твою дверь постучали. Это были двое членов городского совета и выглядели они крайне взволнованными. Они рассказали тебе, что радио только что уловило сообщение из укрепленного нефтеперегонного завода возле Сан-Англо на юге. Тамошние жители хотят обменять 10,000 литров горючего на зерно и семена, чтобы улучшить свое производство продовольствия. Совет согласился на этот обмен и сейчас подыскивает кого-нибудь, кто отправился бы в Сан-Англо доставить туда мешки и пригнать назад в Новую Надежду бензовоз с горючим. Это будет длинное и опасное путешествие через страну, лишенную закона.');

  function talk () {
    synth.speak (utterance);
  }

  function stop () {
    synth.pause();
  }
  </script>
     
    <script src="script.js"></script>
    </body>
</html>
